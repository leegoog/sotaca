<% title "Products" %>

<% content_for (:head) do %>
 <script type="text/javascript" charset="utf-8">

 	$(function(){
		$('div[id^="photo"] img').load(function(){
				$(this).closest('div').find('.loading').delay(100).fadeOut('slow');
		});
	});
 </script>
<% end %>
<% content_for(:left) do %>
	<ul class="categories">
	<% for category in @categories %>
	   <li><%= link_to category.name, :controller => 'products', :action => "index" , :category => category.id %></li>
	<% end %>
	</ul>
<% end %>

<div class="product_overview">
	<%= render @products%>
	<div class="clear"></div>
</div>
<div class="admin_panel">
<% if can? :create, Product %>
<p><%= link_to "New Product", new_product_path(@products.size) %></p>
<% end %>
</div>
<div id="paginator">
 Sort by: <%= select_tag(:order_key, options_for_select([['Newest items', 'created_at'], ['Alphabetical', 'title'], ['Prices', 'price']])) %>
<br/>
<% # link_to "View all pages", {:controller => "products", :action => "index", :per_page => 1000 } %>
<%= paginate @products %>
</div>